# Wave & Enemy System - 웨이브 및 적 시스템

## 웨이브 구조

게임은 총 **10 웨이브**로 구성된다. 각 웨이브는 난이도가 점진적으로 증가한다.

### 웨이브 구성표

| 웨이브 | 적 수 | 적 HP 배율 | 적 타입 | 특수 조건 |
|--------|-------|----------|---------|----------|
| 1 | 5 | x1.0 | Grunt만 | 튜토리얼 (턴 제한 완화: 20턴) |
| 2 | 7 | x1.0 | Grunt, Runner | - |
| 3 | 8 | x1.2 | Grunt, Runner, Shield | - |
| 4 | 10 | x1.3 | 혼합 | **미니보스**: Brute |
| 5 | 12 | x1.5 | 혼합 | **속성 웨이브**: 랜덤 Suit 내성 |
| 6 | 12 | x1.7 | 혼합 + Healer | - |
| 7 | 15 | x2.0 | 혼합 | **미니보스**: Shadow |
| 8 | 15 | x2.3 | 혼합 + Siege | **속성 웨이브**: 2종 Suit 내성 |
| 9 | 18 | x2.7 | 혼합 | 턴 제한 축소: 12턴 |
| 10 | 20 | x3.0 | 혼합 | **최종 보스**: King of Ruin |

## 적 타입

### 기본 적

| 타입 | HP | ATK | SPD | 특수 |
|------|-----|-----|-----|------|
| Grunt | 40 | 8 | 1.0 | 없음 |
| Runner | 25 | 5 | 2.0 | 빠른 이동 |
| Shield | 60 | 6 | 0.7 | 전방 피해 50% 감소 |
| Healer | 35 | 3 | 0.8 | 인접 적 HP 매턴 10 회복 |
| Siege | 80 | 15 | 0.5 | 유닛 무시, 기지만 공격 |

### 보스 적

| 보스 | 출현 | HP | ATK | 특수 |
|------|------|-----|-----|------|
| Brute | Wave 4 | 200 | 20 | 공격 시 유닛 1칸 뒤로 밀침 |
| Shadow | Wave 7 | 150 | 25 | 매 2턴 투명화 (공격 불가 1턴) |
| King of Ruin | Wave 10 | 500 | 30 | 3 페이즈 전투 (아래 참조) |

### 최종 보스: King of Ruin

Wave 10의 최종 보스는 3단계 페이즈로 전투한다.

**Phase 1 (HP 500-334)**: 일반 공격 + 매 3턴 범위 공격 (전체 유닛 ATK의 50% 피해)
**Phase 2 (HP 333-167)**: 이동 속도 2배, 매 턴 Shield 적 1체 소환
**Phase 3 (HP 166-0)**: 모든 유닛에 매 턴 독(DOT) 5 피해, ATK 50% 증가

## Suit 속성 시스템 (Suit Affinity)

적은 특정 Suit에 대한 **내성** 또는 **약점**을 가질 수 있다.

### 속성 상성

```
Spade (물리) <-> Diamond (관통)    : 상호 보완
Heart (성스러움) <-> Club (마법)   : 상호 보완
```

| 상성 | 효과 |
|------|------|
| 약점 Suit 공격 | 피해 x1.5 |
| 내성 Suit 공격 | 피해 x0.5 |
| 중립 Suit 공격 | 피해 x1.0 |

### 속성 웨이브 (Wave 5, 8)

특정 웨이브에서 모든 적이 동일한 Suit 내성을 가진다.

- **Wave 5**: 랜덤 1개 Suit에 내성 (사전 고지)
- **Wave 8**: 랜덤 2개 Suit에 내성 (사전 고지)

플레이어는 Card Phase 시작 전에 적의 내성 정보를 확인할 수 있다. 이를 통해 어떤 Suit의 카드를 우선적으로 Foundation에 올릴지 전략적 판단이 필요하다.

## 웨이브 간 전이

### Card Phase 턴 제한

| 웨이브 | 턴 제한 |
|--------|--------|
| 1 (튜토리얼) | 20 |
| 2-8 | 15 |
| 9-10 | 12 |

### 상태 이월

웨이브 간 다음 요소가 이월된다:

- **Tableau/Stock/Waste 상태**: 그대로 유지 (이전 웨이브에서 플레이한 상태 계속)
- **Foundation**: 그대로 유지 (이미 올린 카드는 유지, 유닛은 소환 완료)
- **생존 유닛**: HP 유지한 채로 레인에 잔류
- **미사용 유닛 풀**: 최대 5장까지 이월
- **기지 HP**: 이월 (웨이브 간 회복 없음)

### 기지 (Base)

- 초기 HP: **200**
- 웨이브 간 자연 회복 없음
- Heart(Cleric) 유닛이 기지에 인접 배치되면 기지도 회복 가능 (회복량의 50%)
- HP 0 = Game Over

## 적 진행 패턴

적은 웨이브 시작 시 일정 간격으로 레인 우측에서 등장한다.

```
시간 0s: 첫 번째 적 등장
시간 1s: 두 번째 적 등장
시간 1s: (웨이브 후반부 적은 더 빈번하게 등장)
...
```

- 적 간 등장 간격: **1.5초** (기본), 후반 웨이브에서 **1.0초**로 단축
- 보스는 일반 적 전부 등장 후 **3초 딜레이** 후 등장
