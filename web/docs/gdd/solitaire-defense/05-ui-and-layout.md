# UI & Layout - 화면 구성 및 인터페이스

## 화면 구조

게임 화면은 **상하 분할** 구조를 채택한다. 상단에 솔리테어 영역, 하단에 디펜스 영역.

### 전체 레이아웃

```
+----------------------------------------------------------+
|  [Wave Info]     [Turn Counter]     [Score]    [Settings] |
+----------------------------------------------------------+
|                                                          |
|   [Foundation 1] [Foundation 2] [Foundation 3] [Found 4] |
|                                                          |
|   [Stock] [Waste]                                        |
|                                                          |
|   [Tab1] [Tab2] [Tab3] [Tab4] [Tab5] [Tab6] [Tab7]     |
|                                                          |
+----------------------------------------------------------+
|                    Unit Pool Bar                          |
|  [Unit1] [Unit2] [Unit3] [Unit4] [Unit5] ...            |
+----------------------------------------------------------+
|                                                          |
|  [Base]  [Slot1] [Slot2] [Slot3] [Slot4] [Slot5]  <-적  |
|          [HP]    [HP]    [HP]    [HP]    [HP]           |
|                                                          |
+----------------------------------------------------------+
|  [Hint] [Undo] [End Phase]                    [AI Solve] |
+----------------------------------------------------------+
```

## Phase별 화면 상태

### Card Phase

- **솔리테어 영역**: 활성 (카드 조작 가능)
- **디펜스 영역**: 비활성 (흐리게 표시, 이전 웨이브 결과 유지)
- **Unit Pool Bar**: Foundation에 카드를 올릴 때마다 유닛 아이콘 추가 (애니메이션)
- **Turn Counter**: 잔여 턴 표시 (초록 -> 노랑 -> 빨강 색상 변화)
- **Next Wave Preview**: 다음 적 구성 미리보기 (적 아이콘 + 속성 정보)

### Deploy Phase

- **솔리테어 영역**: 비활성 (흐리게 표시)
- **디펜스 영역**: 활성 (유닛 배치 가능)
- **Unit Pool Bar**: 드래그 앤 드롭으로 슬롯에 배치
- **슬롯**: 배치 가능 슬롯이 하이라이트
- **유닛 정보**: 호버 시 스탯/특수 효과 툴팁

### Battle Phase

- **솔리테어 영역**: 비활성
- **디펜스 영역**: 전투 애니메이션 진행
- **속도 조절**: x1, x2, x4 배속 버튼
- **Base HP Bar**: 기지 체력 바 눈에 띄게 표시
- **전투 로그**: 우측에 간략한 전투 로그 (선택적)

## UI 컴포넌트 상세

### HUD (상단 바)

| 요소 | 내용 | 위치 |
|------|------|------|
| Wave Info | "Wave 3/10" + 적 구성 아이콘 | 좌측 |
| Turn Counter | "Turns: 12/15" + 게이지 바 | 중앙 좌 |
| Score | 현재 누적 점수 | 중앙 우 |
| Settings | 사운드/배속/종료 | 우측 |

### Foundation 시각적 피드백

Foundation에 카드를 올릴 때:

1. 카드가 Foundation으로 이동하는 애니메이션
2. 동시에 해당 Suit 색상의 파티클 이펙트
3. Unit Pool Bar에 유닛 아이콘이 "팝" 하면서 추가
4. 콤보 발동 시 추가 이펙트 + "Combo x2!" 텍스트

### Unit Pool Bar

- Foundation에서 생산된 유닛 목록
- 각 유닛은 **미니 카드** 형태로 표시 (Suit 아이콘 + Rank + 등급 테두리)
- Bronze: 구리색 테두리, Silver: 은색 테두리, Gold: 금색 테두리
- 드래그하여 디펜스 슬롯에 배치
- 최대 표시: 10개 (스크롤)
- 이월 카드는 별도 마크 (점선 테두리)

### Defense Lane 시각화

- 각 슬롯은 정사각형 타일
- 유닛 배치 시 Suit에 해당하는 캐릭터 스프라이트 표시
- HP 바: 유닛 아래 작은 게이지
- 적: 우측에서 좌측으로 이동하는 스프라이트
- 적 HP: 적 위에 작은 게이지

### 전투 이펙트

| 액션 | 이펙트 |
|------|--------|
| 근접 공격 | 칼 휘두르기 모션 + 히트 플래시 |
| 원거리 공격 | 투사체 발사 애니메이션 |
| 범위 공격 | 원형 파동 이펙트 |
| 힐 | 녹색 파티클 + 수치 팝업 |
| 유닛 사망 | 페이드아웃 + 파티클 |
| 적 사망 | 사라짐 이펙트 + 점수 팝업 |
| 약점 공격 | "WEAK!" 텍스트 + 확대 피해 수치 |
| 내성 공격 | "RESIST" 텍스트 + 축소 피해 수치 |

## 반응형 레이아웃

### Desktop (1024px+)
- 상하 분할 그대로
- 솔리테어 영역: 기존 Solitary와 동일한 비율
- 디펜스 영역: 화면 하단 30%

### Tablet (768-1023px)
- 동일 구조, 카드/슬롯 크기 축소
- Unit Pool Bar가 하단 고정

### Mobile (< 768px)
- **Phase 전환 시 전체 화면 전환** (솔리테어 전체화면 <-> 디펜스 전체화면)
- 스와이프로 전환 또는 탭 UI
- Unit Pool Bar는 하단 오버레이

## 기존 Solitary UI와의 통합

### 공유 컴포넌트
- CardSprite, CardRenderer: 솔리테어 카드 렌더링 그대로 사용
- LayoutManager: Foundation/Tableau 레이아웃 기존 코드 활용
- GameBridge: React-Phaser 브릿지 패턴 동일하게 적용

### 신규 컴포넌트
- DefenseLane: 디펜스 레인 렌더링
- UnitSprite: 유닛 캐릭터 스프라이트
- EnemySprite: 적 캐릭터 스프라이트
- BattleManager: 전투 로직 관리
- WaveController: 웨이브 진행 관리
- UnitPoolBar: 소환 가능 유닛 UI (React)
- DefenseControls: 배치/전투 제어 UI (React)

### 네비게이션
- 메인 메뉴 (`/`)에서 모드 선택:
  - "Classic Solitaire" -> `/play`
  - "Defense Mode" -> `/defense`
  - "Simulate" -> `/simulate`
