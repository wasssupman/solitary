# Core Loop - 솔리테어 서바이버 핵심 루프

## 개요

"Solitaire Survivors"는 클론다이크 솔리테어의 카드 조작 메커닉과 Survivors-like 장르의 실시간 생존 메커닉을 결합한 게임 모드이다. 플레이어는 솔리테어를 플레이하면서 카드를 Foundation에 올리는 행위를 통해 투사체를 발사하고 강화하며, 동시에 사방에서 몰려오는 적을 자동 공격으로 처치하면서 10분간 생존한다.

## 핵심 루프: 실시간 동시 진행

### 디펜스 모드와의 근본적 차이

| 항목 | 디펜스 모드 | 서바이버 모드 |
|------|-----------|------------|
| **진행 방식** | 턴제 3단계 (Card→Deploy→Battle) | 실시간 동시 진행 |
| **전투 주체** | 소환된 유닛 (복수) | 플레이어 캐릭터 1인 |
| **Foundation 의미** | 유닛 소환 트리거 | 투사체 발사 + 강화 트리거 |
| **피드백 방향** | 단방향 (솔리테어→전투) | 양방향 (솔리테어↔전투, 긍정적만) |
| **공간 구조** | 1D 레인 (5슬롯) | 2D 아레나 (360도) |
| **Suit의 의미** | 유닛 클래스 | 투사체 타입 |
| **시간 제약** | 턴 제한 (15턴/웨이브) | 실시간 생존 (10분) |
| **목표** | 10 웨이브 방어 | 10분 생존 + 10 웨이브 돌파 |

### 게임 화면 구조

```
┌───────────────────────────────────────┐
│        2D 전투 뷰 (상단)              │
│                                       │
│    적   적    [플레이어]   적   적    │
│  적               *              적   │
│        적      (고정)     적          │
│                                       │
├───────────────────────────────────────┤
│     클론다이크 솔리테어 (하단)        │
│                                       │
│  [F] [F] [F] [F]    [S] [W]          │
│                                       │
│  [T] [T] [T] [T] [T] [T] [T]         │
│                                       │
└───────────────────────────────────────┘
```

- **상단**: 플레이어 캐릭터가 중앙에 고정, 적이 사방에서 스폰하여 접근
- **하단**: 표준 Klondike 솔리테어 (규칙 100% 보존)
- **동시 진행**: 솔리테어 조작 중에도 전투가 실시간으로 진행됨

## 실시간 루프: 2개 시스템의 병행

### 시스템 1: 솔리테어 조작 (하단, 플레이어 주도)

플레이어는 언제든지 표준 Klondike 규칙으로 카드를 조작한다.

- **Tableau 조작**: 내림차순 교대색, K만 빈 열
- **Stock/Waste**: 3장씩 드로우, 무제한 순환
- **Foundation 적재**: A부터 오름차순으로 같은 Suit 적재
  - **즉시 효과 1**: 해당 Suit의 투사체 1발 발사 (상단 전투뷰)
  - **즉시 효과 2**: 해당 Suit의 투사체 영구 Tier 상승 (A=Tier 1 → K=Tier 13)
- **시간 제약**: 없음 (플레이어가 원하는 속도로 진행)

**핵심**: Foundation 적재 = 즉시 공격 + 영구 강화. 디펜스 모드와 달리 배치 단계가 없고, 카드를 올리는 순간 효과가 발생한다.

### 시스템 2: 자동 전투 (상단, 시스템 주도)

플레이어 캐릭터가 자동으로 투사체를 발사하며 적을 공격한다.

- **플레이어 위치**: 화면 중앙 고정 (이동 불가)
- **투사체 발사**: 4개 Suit별로 독립적인 투사체 타입, 자동 발사
  - 발사 빈도: Suit별 Foundation 적재 수에 비례
  - 투사체 성능: 현재 Tier (=가장 최근 올린 Rank)에 따라 데미지/효과 증가
- **적 행동**: 360도 방향에서 플레이어를 향해 접근, 접촉 시 피해
  - 피격 무적: 0.5초
  - 넉백: 적 접촉 시 플레이어가 약간 밀려남
- **적 처치 보상**:
  - 경험치: 레벨업 → 3택 선택지
  - 야생카드 드랍 (15% 확률): 솔리테어 진행 보조

## 메카닉 연결점: "Foundation = 무기고"

솔리테어와 전투의 연결은 **Foundation 파일**을 통해 실시간으로 이루어진다.

| 솔리테어 개념 | 서바이버 개념 | 연결 방식 |
|-------------|-------------|----------|
| Foundation 적재 | 투사체 발사 + 강화 | 카드를 올릴 때마다 즉시 1발 발사 + 영구 Tier 상승 |
| Suit (4종) | 투사체 타입 (4종) | ♠️공격속도 ♥️관통 ♦️범위 ♣️디버프 |
| Rank (A-K) | 투사체 Tier | A=Tier 1 → K=Tier 13, 높을수록 강력 |
| Tableau 정리 | 빌드 전략 | 어떤 Suit를 먼저 올릴지 = 어떤 투사체를 먼저 강화할지 |
| 카드 진행 속도 | 전투 압도력 | 빠르게 올릴수록 투사체 발사 빈도 증가 |

### 양방향 피드백 (긍정적만)

디펜스 모드는 단방향(솔→전)이지만, 서바이버 모드는 **양방향**이다.

```
  Foundation 적재
솔리테어 ───────────> 전투 (투사체 발사/강화)
  ^                      │
  │                      │
  └──────────────────────┘
    야생카드 드랍 (적 처치 시 15%)
```

- **솔→전**: Foundation 적재 시 즉시 투사체 발사 + 강화
- **전→솔**: 적 처치 시 야생카드 드랍 → 솔리테어 진행 보조 (막힌 상황 타개)

**중요**: 전투가 솔리테어에 **부정적 영향을 주지 않는다**. 피격당해도 카드가 섞이거나 턴이 줄어들지 않음. 오직 긍정적 피드백(야생카드)만 존재.

## 한 판의 흐름 (Full Game)

```
Game Start
  -> Deal (표준 Klondike 52장 배치)
  -> 실시간 루프 시작:
      [플레이어 조작: 카드 이동/Foundation 적재]
      [시스템 자동: 투사체 발사/적 스폰/전투]
      [양방향 피드백: Foundation→공격, 적처치→야생카드]
  -> 웨이브 1 클리어 (1분) → face-down 카드 1장 자동 reveal
  -> 웨이브 2 클리어 (2분) → face-down 카드 1장 자동 reveal
  -> ...
  -> 웨이브 10 클리어 (10분) → Victory
  또는
  -> HP 0 → Game Over
```

### 승리/패배 조건

- **승리**: 10분 생존 + 10 웨이브 돌파
- **패배**: 플레이어 HP 0
- **중간 목표**: 각 웨이브(1분) 클리어 시 face-down 카드 1장 자동 공개 (솔리테어 진행 보조)

## 시간 구조

- **총 플레이 타임**: 10분
- **웨이브 구조**: 10개 웨이브 (각 1분)
- **웨이브 보상**: face-down 카드 1장 자동 reveal
- **실시간 진행**: 일시정지 없음 (레벨업 선택 시 슬로우 모션 적용)

디펜스 모드의 "턴 제한"과 달리, 서바이버 모드는 **시간 제한**이다. 플레이어는 10분 안에 가능한 한 많은 카드를 Foundation에 올려 전투력을 극대화해야 한다.

## 레벨업 시스템: 3축 성장

적 처치로 얻은 경험치가 일정량 누적되면 레벨업하며, **3개 카테고리** 중 1개를 선택한다.

### 1) 투사체 강화 (전투력 직접 증가)
- 특정 Suit 투사체 데미지 +20%
- 특정 Suit 투사체 발사 속도 +15%
- 특정 Suit 투사체 범위 +30%
- 크리티컬 확률 +10%

### 2) 생존 능력 (방어/회복)
- 최대 HP +20
- 피격 무적 시간 +0.2초
- 넉백 거리 +50% (적과 거리 확보)
- HP 자동 회복 (5초당 1 HP)

### 3) 솔리테어 보조 (카드 진행 가속)
- 야생카드 드랍률 +5%
- 웨이브 클리어 시 reveal 카드 +1장 (총 2장)
- Stock 드로우 3장 → 5장
- Tableau 빈 열에 Q도 배치 가능 (K만 → K/Q)

### 전략적 딜레마
- **단기 생존** (투사체/생존) vs **장기 투자** (솔리테어 보조)
- **특화 빌드** (한 Suit 집중) vs **밸런스 빌드** (전체 강화)

## 핵심 딜레마

### 1) Suit 우선순위: 투사체 빌드 결정
어떤 Suit를 먼저 올릴지가 전투 스타일을 결정한다.

- **♠️ 먼저 올리면**: 공격속도 빌드 (약한 적 다수 상대에 유리)
- **♥️ 먼저 올리면**: 관통 빌드 (밀집된 적 상대에 유리)
- **♦️ 먼저 올리면**: 범위 빌드 (광역 공격)
- **♣️ 먼저 올리면**: 디버프 빌드 (강한 적 약화)

Tableau 정리 순서가 곧 빌드 전략이다.

### 2) 콤보 유지 vs 신중한 플레이
(콤보 시스템이 있다면) 빠르게 카드를 올려 콤보를 유지할지, 아니면 신중하게 Tableau를 정리하며 장기적 효율을 추구할지.

- **빠른 플레이**: 투사체 발사 빈도 증가 → 즉시 전투력 상승
- **신중한 플레이**: Tableau 정리 → 이후 고Rank 카드 접근 → 장기적 Tier 상승

### 3) 레벨업 선택: 단기 vs 장기
전투력 직접 강화 vs 솔리테어 보조의 트레이드오프.

- **전투 강화**: 당장 생존 확률 상승
- **솔리테어 보조**: 카드 진행 가속 → 더 많은 Foundation 적재 → 장기적 전투력 상승

초반엔 생존, 중반엔 솔리테어, 후반엔 전투 강화가 일반적이지만, 플레이어 스타일에 따라 달라진다.

### 4) Tableau 정리 vs 직접 Foundation 적재
(체인 게이지 같은 시스템이 있다면) Tableau를 정리하며 체인을 쌓을지, 아니면 즉시 Foundation에 올려 투사체를 강화할지.

- **Tableau 정리**: 장기적 효율, 고Rank 카드 접근, 체인 게이지 상승
- **직접 적재**: 즉시 전투력, 빠른 Tier 상승, 위급 상황 돌파

## 플레이어 캐릭터 스펙

- **위치**: 화면 중앙 고정 (이동 불가)
- **HP**: 100 (기본값)
- **피격 무적**: 0.5초
- **넉백**: 적 접촉 시 약간 밀려남 (거리 확보 기회)
- **공격**: 자동 투사체 발사 (4개 Suit별 독립)
- **조작**: 하단 솔리테어만 조작, 전투는 자동

## 핵심 설계 철학

### 1) "실시간 동시 진행" - 끊임없는 긴장감
디펜스 모드의 턴제 구조와 달리, 서바이버 모드는 **멈추지 않는다**. 플레이어는 솔리테어를 조작하는 동안에도 상단의 전투 상황을 계속 의식해야 한다.

### 2) "양방향 긍정 피드백" - 선순환 구조
솔리테어 진행 → 전투력 상승 → 적 처치 → 야생카드 → 솔리테어 진행 가속. 두 시스템이 서로를 **긍정적으로** 강화한다.

### 3) "100% Klondike 보존" - 순수한 연결
솔리테어 규칙은 일체 변형하지 않는다. 오직 **Foundation 적재의 의미**만 확장한다. 이를 통해 "솔리테어를 잘 하면 전투도 잘 한다"는 직관적 연결을 보존한다.

### 4) "단순한 전투, 복잡한 빌드" - 초점 분산 방지
전투 자체는 자동화(플레이어 이동 없음, 자동 공격)하여 조작 부담을 줄이고, 대신 **투사체 빌드 전략**과 **레벨업 선택**에 전략적 깊이를 집중시킨다.

## 요약: 디펜스 vs 서바이버

| 구분 | 디펜스 | 서바이버 |
|------|--------|---------|
| **장르** | 타워 디펜스 + 카드 | Survivors-like + 카드 |
| **템포** | 느림 (턴제, 사색적) | 빠름 (실시간, 긴박) |
| **전투 주체** | 유닛 (복수) | 플레이어 (단일) |
| **공간** | 1D 레인 | 2D 아레나 |
| **피드백** | 단방향 | 양방향 (긍정) |
| **목표** | 10 웨이브 방어 | 10분 생존 |
| **난이도 곡선** | 후반 급상승 | 초중반 가파름, 후반 완만 (성장으로 압도) |

두 모드는 **같은 Klondike 규칙을 공유**하지만, **전혀 다른 게임 경험**을 제공한다.
