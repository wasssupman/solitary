# 웨이브 설계와 난이도

## 개요

Solitary Defense는 10개의 캠페인 웨이브와 무한 모드로 구성됩니다. 각 웨이브는 플레이어가 솔리테어 메커니즘을 통해 유닛을 소환하고 다가오는 몬스터를 방어하는 타워 디펜스 구조를 따릅니다.

## 웨이브 진행 시스템

### 기본 흐름
1. 웨이브 시작 전 준비 시간 제공
2. "준비 완료" 버튼으로 플레이어가 직접 시작 타이밍 결정
3. 자동 진행 옵션: 30초 후 자동 시작 (설정 가능)
4. 웨이브 클리어 후 다음 웨이브 준비 단계 진입

### 템포 컨트롤
- 플레이어는 각 웨이브 시작 전 카드 정리, 유닛 재배치, 전략 수립 가능
- "준비 완료" 버튼을 누르지 않으면 무기한 대기
- 자동 진행 활성화 시 30초 카운트다운 표시
- 웨이브 진행 중에는 일시정지 불가 (Emergency Pause 제외)

## 몬스터 타입

### 타입별 특성

| 타입 | 이동 속도 | HP 배율 | 특수 능력 | 등장 웨이브 |
|------|-----------|---------|-----------|-------------|
| **일반** | 1.0x | 1.0x | 없음 | 1~ |
| **속도형** | 1.8x | 0.6x | 없음 | 3~ |
| **탱크** | 0.6x | 2.5x | 없음 | 4~ |
| **엘리트** | 1.2x | 1.5x | 원거리 공격 / 분열 / 실드 | 6~ |
| **보스** | 0.8x | 8.0x | 페이즈별 패턴 변화 | 5, 10 |

### 타입별 상세 설명

**일반 몬스터**
- 가장 기본적인 적 유형
- 직선 경로로 이동, 특수 행동 없음
- 초반 학습 단계의 주력 구성

**속도형 몬스터**
- 빠른 이동으로 방어선 돌파 시도
- 낮은 HP로 균형 조정
- 범위 공격 유닛의 중요성 부각

**탱크 몬스터**
- 높은 HP로 전선 유지
- 느린 속도로 대응 시간 제공
- 단일 대상 고화력 유닛 필요성 강조

**엘리트 몬스터**
- **원거리형**: 레인 중간에서 멈춰 Core에 원거리 공격 (사거리 5칸)
- **분열형**: 처치 시 2개의 작은 몬스터로 분열 (각 50% HP)
- **실드형**: 주기적으로 데미지 무효화 실드 생성 (3초 지속)

**보스 몬스터**
- **웨이브 5 (미니 보스)**: HP 250, 30% HP마다 5초간 무적 + 속도형 몬스터 3마리 소환
- **웨이브 10 (최종 보스)**: HP 800, 3단계 페이즈
  - 페이즈 1 (100-70%): 정상 이동
  - 페이즈 2 (70-40%): 이동 속도 1.5배, 탱크 2마리 소환
  - 페이즈 3 (40-0%): 10초마다 랜덤 유닛 1개 스턴 (5초)

## 웨이브별 설계

### 웨이브 1-3: 학습 단계

**목표**: 기본 메커니즘 숙달 (솔리테어 → 소환 → 방어)

| 웨이브 | 몬스터 구성 | 총 HP | 특이사항 |
|--------|-------------|-------|----------|
| 1 | 일반 ×5 | 150 | 단일 레인, 느린 속도 (0.8x) |
| 2 | 일반 ×8 | 240 | 2개 레인, 정상 속도 |
| 3 | 일반 ×6, 속도형 ×3 | 270 | 속도형 첫 등장, 타이밍 학습 |

**난이도 지표**
- 요구 유닛: 티어 1 (5~7개)
- 필수 조합: 없음 (단일 카드 배치로도 클리어 가능)
- 예상 클리어율: 95%+

**설계 의도**
- 솔리테어 규칙 자연스럽게 체득
- 카드 조합 시 유닛 생성 직관적 이해
- 실패 부담 최소화

### 웨이브 4-7: 압박 단계

**목표**: 전략적 의사결정 요구 (유닛 조합, 배치 최적화)

| 웨이브 | 몬스터 구성 | 총 HP | 특이사항 |
|--------|-------------|-------|----------|
| 4 | 일반 ×8, 속도형 ×4, 탱크 ×2 | 520 | 탱크 첫 등장, 3개 레인 |
| 5 | 일반 ×10, 속도형 ×5, 탱크 ×3, **보스 ×1** | 900 | 미니 보스 등장 |
| 6 | 일반 ×12, 속도형 ×6, 탱크 ×4, 엘리트(원거리) ×2 | 780 | 엘리트 첫 등장 |
| 7 | 속도형 ×10, 탱크 ×5, 엘리트(분열) ×3 | 850 | 4개 레인, 동시 다발 압박 |

**난이도 지표**
- 요구 유닛: 티어 2-3 (8~12개)
- 필수 조합: 최소 1개의 티어 3 또는 2개의 티어 2
- 예상 클리어율: 60~75%

**설계 의도**
- 복수 레인 관리 능력 필수
- 유닛 타입별 역할 구분 체감 (범위 vs 단일 대상)
- Spell 카드 활용 시작 단계

### 웨이브 8-9: 극한 단계

**목표**: 모든 메커니즘 종합 활용

| 웨이브 | 몬스터 구성 | 총 HP | 특이사항 |
|--------|-------------|-------|----------|
| 8 | 속도형 ×15, 탱크 ×6, 엘리트(실드) ×4 | 1150 | 속도+실드 조합, 5개 레인 |
| 9 | 일반 ×10, 탱크 ×8, 엘리트(전체) ×6 | 1350 | 3가지 엘리트 동시 등장 |

**난이도 지표**
- 요구 유닛: 티어 3-4 (12~15개)
- 필수 조합: 최소 1개의 티어 4 또는 3개의 티어 3
- Spell 카드: 웨이브당 2~3회 필수 사용
- 예상 클리어율: 30~45%

**설계 의도**
- 완벽한 카드 순환 필요
- 긴급 상황 대처 능력 (Emergency Pause, Hint 토큰)
- 힐 유닛(♥ 조합) 전략적 배치

### 웨이브 10: 최종 보스

| 웨이브 | 몬스터 구성 | 총 HP | 특이사항 |
|--------|-------------|-------|----------|
| 10 | 일반 ×8, 속도형 ×6, 탱크 ×4, **최종 보스 ×1** | 1800 | 3페이즈 보스 전투 |

**난이도 지표**
- 요구 유닛: 티어 4 (2~3개) + 티어 3 다수
- 필수 조합: 세븐즈 아포칼립스 또는 동등 화력
- Spell 카드: 4~5회 전략적 사용
- 예상 클리어율: 15~25%

**보스 전투 흐름**
1. **준비 단계 (60초)**: 최대한 고티어 유닛 배치
2. **페이즈 1 (보스 HP 100-70%)**: 일반 몬스터 처리하며 보스 견제
3. **페이즈 2 (70-40%)**: 탱크 소환 대응, 보스 집중 공격
4. **페이즈 3 (40-0%)**: 스턴 관리하며 최종 화력 집중

**설계 의도**
- 캠페인 정점, 모든 학습 내용 총동원
- 긴장감 있는 긴 전투 (3~5분)
- 클리어 시 강한 성취감 제공

### 웨이브 11+: 무한 모드

**구조**
- 웨이브 10 클리어 후 자동 진입
- 매 웨이브마다 몬스터 스펙 증가
  - HP: +12% (복리)
  - 이동 속도: +8% (복리)
  - 몬스터 수: +1~2마리
- 5웨이브마다 미니 보스 등장 (웨이브 15, 20, 25...)

**난이도 곡선**
| 웨이브 | 몬스터 총 HP | 평균 속도 배율 | 예상 생존율 |
|--------|--------------|----------------|-------------|
| 11 | 2,016 | 1.08x | 80% |
| 15 | 3,200 (보스 포함) | 1.36x | 50% |
| 20 | 5,800 (보스 포함) | 1.85x | 20% |
| 25 | 10,500 (보스 포함) | 2.52x | 5% |
| 30+ | 18,000+ | 3.4x+ | <1% |

**리더보드 시스템**
- 기록: 최대 도달 웨이브 + 총점
- 랭킹: 전 세계 / 지역 / 친구
- 시즌제 (월간 리셋)

**설계 의도**
- 무한한 재도전 동기 부여
- 숙련도에 따른 명확한 성장 체감
- 경쟁 요소로 장기 리텐션 확보

## Core HP 시스템

### 기본 규칙
- 초기 HP: 3
- 몬스터가 경로 끝(Core)에 도달 시: -1 HP
- Core HP 0 = 게임 오버

### HP 관리 전략
- **보존**: 모든 몬스터 완벽 차단 (이상적이나 어려움)
- **회복**: ♥ 조합 유닛의 힐 능력 활용
  - 티어 2(Pair): 웨이브당 1회, +1 HP (최대 3)
  - 티어 3(Three of Hearts): 웨이브당 2회, +1 HP
  - 티어 4(Four of Hearts): 지속적 소량 회복 (10초당 +0.5 HP, 최대 3)
- **희생**: 전략적 1~2 HP 손실 후 역전 (고난이도 웨이브)

### HP와 난이도 연계
- 웨이브 1-3: HP 손실 거의 없음 (튜토리얼 성격)
- 웨이브 4-7: 평균 1~2 HP 손실 예상, 회복 필요
- 웨이브 8-10: 힐 유닛 없으면 HP 0 위험
- 무한 모드: HP 3 유지가 핵심 생존 조건

## 보조 시스템

### Hint 토큰

**기능**
- AI가 현재 상황에서 최적의 다음 카드 플레이 제안
- 총 3개 제공 (웨이브 간 리셋 없음)
- 사용 시 해당 카드 하이라이트 + 간단한 이유 표시

**페널티**
- 사용당 -20점
- 리더보드 순위에 영향

**사용 시나리오**
- 복잡한 카드 조합 상황
- 최적 플레이 학습 목적
- 긴급 상황 판단 보조

**설계 의도**
- 초보자 접근성 향상
- 학습 도구 역할
- 과도한 의존 방지 (제한적 제공 + 점수 페널티)

### Emergency Pause

**기능**
- 웨이브 진행을 5초간 완전 정지
- 웨이브당 1회 제한 (웨이브 종료 시 리셋)
- 일시정지 중 카드 플레이 가능

**페널티**
- 사용당 -30점

**사용 시나리오**
- 예상치 못한 속도형 몬스터 집단 돌파
- 카드 순환 실패로 인한 긴급 상황
- 복잡한 조합 계산 시간 확보

**설계 의도**
- 순간적 판단 실수 구제
- 긴장감 유지하면서도 과도한 스트레스 방지
- 전략적 사용 vs 점수 희생의 딜레마

## 난이도 밸런싱 지표

### 목표 클리어율
| 웨이브 구간 | 1회차 클리어율 | 10회차 클리어율 |
|-------------|----------------|-----------------|
| 1-3 | 90%+ | 98%+ |
| 4-7 | 50~70% | 85~90% |
| 8-9 | 25~40% | 65~75% |
| 10 | 10~20% | 45~60% |
| 15 (무한) | 40% | 70% |
| 20 (무한) | 10% | 35% |

### 평균 플레이 타임
- 웨이브 1-3: 각 1~2분
- 웨이브 4-7: 각 2~4분
- 웨이브 8-9: 각 4~6분
- 웨이브 10: 5~8분
- 전체 캠페인 (1-10): 30~50분

### 핵심 난이도 요소
1. **카드 운**: 20% (솔리테어 덱 셔플)
2. **전략 이해**: 40% (조합 선택, 배치 최적화)
3. **실시간 판단**: 30% (몬스터 우선순위, Spell 타이밍)
4. **숙련도**: 10% (빠른 카드 인식, 효율적 조작)

## 추후 확장 가능성

### 추가 콘텐츠
- **Hard 모드**: 초기 HP 2, 몬스터 속도 +20%
- **Daily Challenge**: 특수 룰 + 고정 시드, 일일 랭킹
- **Achievement 연동 보너스**: 특정 조건 달성 시 Hint +1 등

### 밸런싱 조정 포인트
- 몬스터 HP/속도 배율 (CSV 데이터화)
- 웨이브별 몬스터 구성 (JSON 설정 파일)
- 보조 시스템 페널티 값 (config.ts)
- 무한 모드 증가율 (A/B 테스트 대상)

---

**문서 버전**: 1.0
**최종 수정**: 2026-02-15
**작성자**: Classic Rule Agent
